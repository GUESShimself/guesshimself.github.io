(function(){"use strict";function po(o){let t=o|0;return()=>{t=t+1831565813|0;let s=Math.imul(t^t>>>15,1|t);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}function ko(o){const t=po(o),s=Array.from({length:256},(l,d)=>d);for(let l=255;l>0;l--){const d=Math.floor(t()*(l+1));[s[l],s[d]]=[s[d],s[l]]}const c=[...s,...s],i=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]],a=l=>l*l*l*(l*(l*6-15)+10),n=(l,d,h)=>l+h*(d-l),r=(l,d,h)=>l[0]*d+l[1]*h;return(l,d)=>{const h=Math.floor(l)&255,C=Math.floor(d)&255,f=l-Math.floor(l),m=d-Math.floor(d),M=a(f),y=a(m),u=c[c[h]+C],b=c[c[h]+C+1],p=c[c[h+1]+C],P=c[c[h+1]+C+1];return n(n(r(i[u%8],f,m),r(i[p%8],f-1,m),M),n(r(i[b%8],f,m-1),r(i[P%8],f-1,m-1),M),y)*.5+.5}}const _=(o,t,s)=>o+(t-o)*s,e=(o,t,s)=>_(o,t,s()),W=(o,t,s)=>Math.floor(e(o,t+1,s)),j=(o,t)=>o[Math.floor(t()*o.length)],lo=(o,t,s)=>Math.min(s,Math.max(t,o)),R=Math.PI*2,Y=(o,t,s)=>`hsl(${o},${t}%,${s}%)`,J=(o,t,s,c)=>`hsla(${o},${t}%,${s}%,${c})`;function vo(o,t){const s=e(0,360,o),c={analogous:()=>Array.from({length:7},(i,a)=>[(s+a*20-60+360)%360,e(50,92,o),e(38,72,o)]),complementary:()=>{const i=(s+180)%360;return[[s,e(60,90,o),e(42,65,o)],[s,e(45,75,o),e(58,78,o)],[i,e(60,90,o),e(42,65,o)],[i,e(45,75,o),e(55,75,o)],[(s+90)%360,e(35,55,o),e(50,70,o)],[(s+270)%360,e(40,65,o),e(48,68,o)],[s,e(20,40,o),e(15,30,o)]]},triadic:()=>[0,120,240,60,180,300,30].map(i=>[(s+i)%360,e(48,88,o),e(40,68,o)]),warm:()=>[e(0,15,o),e(15,40,o),e(35,55,o),e(40,60,o),e(0,10,o),e(45,65,o),e(20,35,o)].map(a=>[a,e(55,95,o),e(40,70,o)]),neon:()=>Array.from({length:7},(i,a)=>[(s+a*51)%360,e(88,100,o),e(50,64,o)]),mono:()=>Array.from({length:7},(i,a)=>[s,e(30,90,o),12+a*11])};return(c[t]||c.analogous)()}function Po(o,t){const s=[];return o.forEach(c=>{const i=W(1,6,t);for(let a=0;a<i;a++)s.push(c)}),()=>j(s,t)}function Ro(o,t,s){const c=o();if(c<.14)return{type:"circle"};if(c<.24){const i=W(3,3+Math.floor(t*8),o),a=[];for(let n=0;n<i;n++){const r=n/i*R-Math.PI/2,l=1+(o()-.5)*s*.6;a.push([Math.cos(r)*l,Math.sin(r)*l])}return{type:"poly",pts:a}}if(c<.34){const i=W(3,6+Math.floor(t*5),o),a=e(.25,.5,o),n=[];for(let r=0;r<i*2;r++){const l=r/(i*2)*R-Math.PI/2,d=r%2===0?1:a;n.push([Math.cos(l)*d*(1+(o()-.5)*s*.3),Math.sin(l)*d*(1+(o()-.5)*s*.3)])}return{type:"poly",pts:n}}if(c<.44){const i=W(3,5+Math.floor(t*3),o),a=[];for(let n=0;n<i;n++){const r=n/i*R,l=(n+1)/i*R,d=(r+l)/2;a.push({x:Math.cos(r)*(1+(o()-.5)*s),y:Math.sin(r)*(1+(o()-.5)*s),cpx:Math.cos(d)*e(.5,1.4,o)*(.4+s*.6),cpy:Math.sin(d)*e(.5,1.4,o)*(.4+s*.6)})}return{type:"blob",cp:a}}if(c<.52){const i=W(2,3+Math.floor(t*3),o);return{type:"rings",rings:Array.from({length:i},(a,n)=>({r:(n+1)/i,lw:e(.02,.07,o)}))}}if(c<.6)return{type:"target",rings:W(2,5,o)};if(c<.66){const i=[];for(let a=0;a<6;a++){const n=a/6*R;i.push([Math.cos(n),Math.sin(n)])}return{type:"poly",pts:i}}if(c<.72)return{type:"cross",thick:e(.1,.25,o)};if(c<.86){const i=W(3,6+Math.floor(t*4),o),a=[];a.push({cx:0,cy:0,r:e(.4,.7,o)});for(let n=1;n<i;n++){const r=a[Math.floor(o()*a.length)],l=e(0,R,o),d=e(.25,.65,o)*(1+s*.3),h=r.r+d*e(.3,.7,o);a.push({cx:r.cx+Math.cos(l)*h,cy:r.cy+Math.sin(l)*h,r:d})}return{type:"cloudCluster",circles:a}}return{type:"petal",bulge:e(.4,.9,o)*(.6+s*.4),taper:e(.15,.4,o)}}function To(o,t,s,c,i,a=0){const{shape:n,x:r,y:l,rot:d,size:h,color:C,opacity:f,strokeOnly:m,lw:M}=t;o.save(),o.translate(r,l),o.rotate(d),o.globalAlpha=lo(f,0,1);const[y,u,b]=C,p=h/2,P=Math.cos(s),X=Math.sin(s),D=Math.min(97,b+c*25),T=Math.max(5,b-c*20),B=a>0&&!m,F=Math.max(.5,a*3),I=Y(y,u*.7,Math.max(5,b-25)),E=()=>{if(!i||m)return Y(y,u,b);const S=P*p*.3*c,A=X*p*.3*c,$=o.createRadialGradient(S,A,0,0,0,p);return $.addColorStop(0,Y(y,Math.min(100,u*1.1),D)),$.addColorStop(.5,Y(y,u,b)),$.addColorStop(1,Y(y,u*.8,T)),$},K=()=>Y(y,u,Math.min(90,b+12)),N=()=>{m?(o.strokeStyle=K(),o.lineWidth=M,o.stroke()):(o.fillStyle=E(),o.fill(),B&&(o.strokeStyle=I,o.lineWidth=F,o.stroke()))};if(n.type==="circle")o.beginPath(),o.arc(0,0,p,0,R),N();else if(n.type==="poly")o.beginPath(),n.pts.forEach(([S,A],$)=>$===0?o.moveTo(S*p,A*p):o.lineTo(S*p,A*p)),o.closePath(),N();else if(n.type==="blob"){o.beginPath(),o.moveTo(n.cp[0].x*p,n.cp[0].y*p);for(let S=0;S<n.cp.length;S++){const A=n.cp[(S+1)%n.cp.length];o.quadraticCurveTo(n.cp[S].cpx*p,n.cp[S].cpy*p,A.x*p,A.y*p)}o.closePath(),N()}else if(n.type==="rings")n.rings.forEach(S=>{o.beginPath(),o.arc(0,0,S.r*p,0,R),o.strokeStyle=Y(y,u,b),o.lineWidth=S.lw*h,o.stroke()});else if(n.type==="target")for(let S=n.rings;S>=1;S--){const A=S/n.rings*p;o.beginPath(),o.arc(0,0,A,0,R);const $=S%2===0?Math.min(95,b+20):Math.max(10,b-15);if(i&&!m){const co=P*A*.2*c,io=X*A*.2*c,w=o.createRadialGradient(co,io,0,0,0,A);w.addColorStop(0,Y(y,u,Math.min(97,$+c*15))),w.addColorStop(1,Y(y,u*.9,$)),o.fillStyle=w}else o.fillStyle=Y(y,u,$);o.fill(),o.strokeStyle=Y(y,u*.6,Math.max(5,$-10)),o.lineWidth=B?F:.8,o.stroke()}else if(n.type==="cross"){const S=n.thick*h;o.fillStyle=Y(y,u,b),o.fillRect(-p,-S/2,h,S),o.fillRect(-S/2,-p,S,h),B&&(o.strokeStyle=I,o.lineWidth=F,o.strokeRect(-p,-S/2,h,S),o.strokeRect(-S/2,-p,S,h))}else if(n.type==="cloudCluster"){const S=E();for(const A of n.circles)o.beginPath(),o.arc(A.cx*p,A.cy*p,A.r*p,0,R),m?(o.strokeStyle=K(),o.lineWidth=M,o.stroke()):(o.fillStyle=S,o.fill(),o.strokeStyle=I,o.lineWidth=Math.max(.5,F*.7),o.stroke())}else if(n.type==="petal"){const S=-p,A=p*n.taper,$=p*n.bulge;o.beginPath(),o.moveTo(0,S),o.bezierCurveTo($*.6,S*.5,$,A*.2,0,A),o.bezierCurveTo(-$,A*.2,-$*.6,S*.5,0,S),o.closePath(),N()}o.restore()}function Ao(o,t,s,c,i,a,n){if(n==="flat"){o.fillStyle="#f5f2ec",o.fillRect(0,0,t,s);return}o.fillStyle="#f5f2ec",o.fillRect(0,0,t,s);const r=W(2,4,i);for(let l=0;l<r;l++){const d=e(t*.1,t*.9,i),h=e(s*.1,s*.9,i),C=e(Math.min(t,s)*.3,Math.max(t,s)*.8,i),f=j(c,i),m=o.createRadialGradient(d,h,0,d,h,C);m.addColorStop(0,J(f[0],f[1]*.6,_(f[2],95,.7),n==="subtle"?.15:.35)),m.addColorStop(.6,J(f[0],f[1]*.3,_(f[2],95,.85),n==="subtle"?.06:.15)),m.addColorStop(1,"transparent"),o.fillStyle=m,o.fillRect(0,0,t,s)}}function zo(o,t,s,c,i,a,n,r,l){const[d,h,C]=a,f=e(0,c,t),m=e(0,i,t),M=W(15,80,t),y=e(2,6,t),u=e(5,12,t),b=e(0,R,t),p=e(.02,.12,t);let P=f,X=m,D=b;for(let T=0;T<M;T++){const B=s(P*.008,X*.008);if(D+=(B-.5)*p*2,o.save(),o.globalAlpha=lo(.6+T/M*.3,0,1),l){const F=Math.cos(n)*y*.2*r,I=Math.sin(n)*y*.2*r,E=o.createRadialGradient(P+F,X+I,0,P,X,y);E.addColorStop(0,Y(d,h,Math.min(97,C+20))),E.addColorStop(1,Y(d,h*.8,Math.max(10,C-10))),o.fillStyle=E}else o.fillStyle=Y(d,h,C);o.beginPath(),o.arc(P,X,y*(.6+t()*.4),0,R),o.fill(),o.restore(),P+=Math.cos(D)*u,X+=Math.sin(D)*u}}function Oo(o,t,s,c,i,a,n,r){for(let l=0;l<n;l++){const d=j(a,t),[h,C,f]=d,m=W(8,30,t);let M=e(c*-.1,c*1.1,t),y=e(i*-.1,i*1.1,t),u=e(0,R,t);const b=e(.5,2.5+r*2,t),p=e(30,120,t);o.save(),o.globalAlpha=lo(e(.3,.85,t),0,1),o.strokeStyle=Y(h,C*.9,f),o.lineWidth=b,o.lineCap="round",o.lineJoin="round",o.beginPath(),o.moveTo(M,y);for(let X=0;X<m;X++){const D=s(M*.006,y*.006);u+=(D-.5)*1.8+(t()-.5)*.6;const T=p*(.5+t()),B=M+Math.cos(u+t()*.8)*T*.6,F=y+Math.sin(u+t()*.8)*T*.6,I=M+Math.cos(u)*T,E=y+Math.sin(u)*T,K=I-Math.cos(u+t()*.8)*T*.3,N=E-Math.sin(u+t()*.8)*T*.3;o.bezierCurveTo(B,F,K,N,I,E),M=I,y=E}o.stroke(),r>.2&&(o.strokeStyle=Y(h,C*.6,Math.max(5,f-20)),o.lineWidth=b+r*1.5,o.globalAlpha*=.3,o.stroke()),o.restore();const P=.3+r*.3;M=e(c*-.1,c*1.1,t),y=e(i*-.1,i*1.1,t),u=e(0,R,t);for(let X=0;X<m;X++){const D=s(M*.006,y*.006);u+=(D-.5)*1.8+(t()-.5)*.6;const T=p*(.5+t());if(M+=Math.cos(u)*T,y+=Math.sin(u)*T,t()<P){const B=e(1.5,5,t);o.save(),o.globalAlpha=e(.4,.9,t),o.beginPath(),o.arc(M,y,B,0,R),o.fillStyle=Y(h,C,Math.min(95,f+15)),o.fill(),r>0&&(o.strokeStyle=Y(h,C*.7,Math.max(5,f-20)),o.lineWidth=Math.max(.3,r),o.stroke()),o.restore()}}}}function Yo(o,t,s,c,i,a){const n=["×","+","•","1","2","3","4","5","6","7","8","9","0"],r=[8,10,12,14,18,22,28];for(let l=0;l<a;l++){const d=e(-20,s+20,t),h=e(-20,c+20,t),C=j(n,t),f=j(r,t),m=j(i,t),M=e(.15,.65,t);o.save(),o.translate(d,h),o.rotate(e(-.4,.4,t)),o.globalAlpha=M,o.font=`${f}px 'DM Mono', monospace`,o.fillStyle=Y(m[0],m[1],m[2]),o.textAlign="center",o.textBaseline="middle",o.fillText(C,0,0),o.restore()}}function Xo(o,t,s,c,i,a){const n=Math.round(a*8),r=Math.min(s,c),l=Math.max(s,c);for(let d=0;d<n;d++){const h=j(i,t),C=e(s*-.1,s*1.1,t),f=e(c*-.1,c*1.1,t),m=e(r*.2,l*.6,t),M=e(.06,.18,t)*a,y=h[1]*.4,u=o.createRadialGradient(C,f,0,C,f,m);u.addColorStop(0,J(h[0],y,h[2],M)),u.addColorStop(.4,J(h[0],y*.8,h[2],M*.6)),u.addColorStop(.7,J(h[0],y*.5,h[2],M*.2)),u.addColorStop(1,"transparent"),o.fillStyle=u,o.fillRect(0,0,s,c)}}function $o(o,t,s,c,i,a){const n=Math.round(a*5);for(let r=0;r<n;r++){const l=j(i,t),d=l[1]*.5,h=e(20,80,t),C=W(3,5,t),f=[];for(let M=0;M<C;M++)f.push({x:e(s*-.1,s*1.1,t),y:e(c*-.1,c*1.1,t)});const m=W(5,8,t);for(let M=0;M<m;M++){const y=_(.12,.02,M/m)*a,u=h*_(.3,2.5,M/m);if(o.save(),o.globalAlpha=y,o.lineWidth=u,o.lineCap="round",o.lineJoin="round",o.strokeStyle=J(l[0],d,l[2],1),M===0&&(o.shadowBlur=e(20,60,t),o.shadowColor=J(l[0],d,l[2],.3)),o.beginPath(),o.moveTo(f[0].x,f[0].y),f.length===3)o.quadraticCurveTo(f[1].x,f[1].y,f[2].x,f[2].y);else{for(let b=1;b<f.length-1;b+=2){const p=f[b],P=f[b+1]??f[b];o.quadraticCurveTo(p.x,p.y,P.x,P.y)}if(f.length%2===0){const b=f[f.length-1];o.lineTo(b.x,b.y)}}o.stroke(),o.restore()}}}function Lo(o,t,s,c,i,a){const n=Math.round(a*6);for(let r=0;r<n;r++){const l=j(i,t),d=e(s*.05,s*.95,t),h=e(c*.05,c*.95,t),C=e(30,Math.min(s,c)*.2,t),f=W(8,25,t),m=l[1]*.5;for(let M=0;M<f;M++){const y=(t()+t()-1)*C,u=(t()+t()-1)*C,b=e(10,60,t),p=e(.03,.08,t)*a,P=o.createRadialGradient(d+y,h+u,0,d+y,h+u,b);P.addColorStop(0,J(l[0],m,l[2],p)),P.addColorStop(.5,J(l[0],m*.7,l[2],p*.5)),P.addColorStop(1,"transparent"),o.fillStyle=P,o.fillRect(0,0,s,c)}}}function Wo(o,t,s,c,i,a){const n=Math.round(a*12);if(n===0)return;const r=i/360*R,l=s/2+Math.cos(r)*Math.max(s,c)*.6,d=c/2+Math.sin(r)*Math.max(s,c)*.6,h=Math.hypot(s,c)*1.2;o.save(),o.globalCompositeOperation="lighter";for(let C=0;C<n;C++){const f=r+Math.PI+e(-.5,.5,t),m=e(.01,.06,t),M=e(h*.4,h,t),y=e(.02,.05,t)*a,u=l+Math.cos(f)*M,b=d+Math.sin(f)*M,p=u+Math.cos(f+Math.PI/2)*M*m,P=b+Math.sin(f+Math.PI/2)*M*m,X=u+Math.cos(f-Math.PI/2)*M*m,D=b+Math.sin(f-Math.PI/2)*M*m,T=o.createLinearGradient(l,d,u,b);T.addColorStop(0,`rgba(255,248,230,${y})`),T.addColorStop(.3,`rgba(255,240,210,${y*.6})`),T.addColorStop(1,"transparent"),o.fillStyle=T,o.beginPath(),o.moveTo(l,d),o.lineTo(p,P),o.lineTo(X,D),o.closePath(),o.fill()}o.restore()}function qo(o,t,s,c,i){const a=po(i),n=ko(i),{density:r,complexity:l,organicness:d,sizeMin:h,sizeMax:C,opacityMin:f,opacityMax:m,rotationSpread:M,strokeRatio:y,paletteMode:u,layout:b,noiseScale:p,noiseInfluence:P,colorStrategy:X,oscillatorFreq:D,oscillatorAmp:T,symmetryMode:B,layerCount:F,layerFade:I,lightAngle:E,lightIntensity:K,gradientShapes:N,beadChains:S,typoScatter:A,bgStyle:$,atmoClouds:co,atmoRibbons:io,atmoBlooms:w,atmoRays:Mo,tangles:Go,outlineWeight:uo}=c,L=vo(a,u),yo=Po(L,a);Ao(o,t,s,L,a,!1,$),Mo>0&&Wo(o,a,t,s,E,Mo),co>0&&Xo(o,a,t,s,L,co),w>0&&Lo(o,a,t,s,L,w);const Bo=Math.floor(25+r*975),ro=Math.max(1,Math.round(F)),mo=E/360*R;for(let g=0;g<ro;g++){const Eo=ro===1?1:1-g/ro*I,jo=Array.from({length:W(3,8,a)},()=>Ro(a,l,d)),Io=Array.from({length:W(2,5,a)},()=>({x:e(t*.12,t*.88,a),y:e(s*.12,s*.88,a),spread:e(50,Math.min(t,s)*.4,a)})),Q=[],oo=Math.floor(Bo/ro);for(let U=0;U<oo;U++){const V=j(jo,a),_o=U/oo;let q,G;if(b==="grid"){const v=Math.ceil(Math.sqrt(oo*(t/s))),z=Math.ceil(oo/v),k=t/v,O=s/z;q=U%v*k+k/2+e(-k*.3,k*.3,a)*P,G=Math.floor(U/v)*O+O/2+e(-O*.3,O*.3,a)*P}else if(b==="radial"){const v=Math.ceil(Math.sqrt(oo/3)),k=Math.floor(a()*v)/v*Math.min(t,s)*.45+e(-15,15,a),O=e(0,R,a);q=t/2+Math.cos(O)*k,G=s/2+Math.sin(O)*k}else if(b==="noise"){let v,z,k=0;do v=e(0,t,a),z=e(0,s,a),k++;while(n(v*p*.01,z*p*.01)<a()*.65&&k<20);q=v,G=z}else if(b==="cluster"){const v=j(Io,a),z=e(0,R,a),k=e(0,v.spread,a)*a();q=v.x+Math.cos(z)*k,G=v.y+Math.sin(z)*k}else if(b==="burst"){const v=e(0,R,a),k=Math.min(t,s)*.48*Math.pow(a(),.35);q=t/2+Math.cos(v)*k+e(-10,10,a),G=s/2+Math.sin(v)*k+e(-10,10,a)}else q=e(-30,t+30,a),G=e(-30,s+30,a);const fo=n(q*p*.008,G*p*.008),Fo=n(q*p*.012+100,G*p*.012+100),ho=fo*R*2;q+=Math.cos(ho)*P*45,G+=Math.sin(ho)*P*45;let H;if(X==="noise"){const v=Math.floor(fo*L.length)%L.length,z=(v+1)%L.length,k=fo*L.length%1;H=[_(L[v][0],L[z][0],k),_(L[v][1],L[z][1],k),_(L[v][2],L[z][2],k)]}else if(X==="field"){const v=L.map((O,x)=>({x:x*137.5%360/360*t,y:(x*97.3+50)%360/360*s,c:O}));let z=0;const k=[0,0,0];v.forEach(O=>{const Z=1/(1+Math.hypot(q-O.x,G-O.y)*.004);k[0]+=O.c[0]*Z,k[1]+=O.c[1]*Z,k[2]+=O.c[2]*Z,z+=Z}),H=[k[0]/z,k[1]/z,k[2]/z]}else H=yo();const Co=Math.sin(_o*D*R)*T,Jo=_(h,C,a())*(.8+Fo*.5),to=Math.max(2,Jo+Co*20),so=lo(_(f,m,a())*Eo+Co*.08,.02,1),eo=ho*M+(a()-.5)*(1-M)*R,ao=a()<y,no=e(.8,2.5,a);if(Q.push({shape:V,x:q,y:G,rot:eo,size:to,color:H,opacity:so,strokeOnly:ao,lw:no}),(B==="bilateral"||B==="quad")&&Q.push({shape:V,x:t-q,y:G,rot:-eo,size:to,color:H,opacity:so,strokeOnly:ao,lw:no}),B==="quad"&&(Q.push({shape:V,x:q,y:s-G,rot:-eo,size:to,color:H,opacity:so,strokeOnly:ao,lw:no}),Q.push({shape:V,x:t-q,y:s-G,rot:eo,size:to,color:H,opacity:so,strokeOnly:ao,lw:no})),B==="rotational"){const v=t/2,z=s/2;for(let k=1;k<4;k++){const O=k/4*R,x=q-v,Z=G-z;Q.push({shape:V,x:v+x*Math.cos(O)-Z*Math.sin(O),y:z+x*Math.sin(O)+Z*Math.cos(O),rot:eo+O,size:to,color:H,opacity:so,strokeOnly:ao,lw:no})}}}Q.sort((U,V)=>U.size-V.size),Q.forEach(U=>To(o,U,mo,K,N,uo))}const Do=Math.round(S*8);for(let g=0;g<Do;g++)zo(o,a,n,t,s,yo(),mo,K,N);const bo=Math.round(Go*12);bo>0&&Oo(o,a,n,t,s,L,bo,uo);const So=Math.round(A*80);So>0&&Yo(o,a,t,s,L,So),io>0&&$o(o,a,t,s,L,io)}self.onmessage=o=>{const{id:t,w:s,h:c,params:i,seed:a}=o.data,n=new OffscreenCanvas(s,c),r=n.getContext("2d");if(!r)return;qo(r,s,c,i,a);const l=n.transferToImageBitmap();postMessage({id:t,bitmap:l},[l])}})();
